# CLAUDE.md

## Project Overview

**Schellis Tafel** — a family dashboard web application for managing tasks, meal planning, and a shared calendar. Built for three family members (Schelli, Kathy, Virginia) with bilingual support (German/English).

**Stack:** React 19 + Vite 7 + Tailwind CSS 4 (no TypeScript, no backend)

## Commands

| Command | Purpose |
|---------|---------|
| `npm run dev` | Start Vite dev server with HMR |
| `npm run build` | Production build to `dist/` |
| `npm run lint` | Run ESLint on the entire project |
| `npm run preview` | Preview production build locally |

Run `npm install` before first use. No test framework is configured.

## Architecture

### File Structure

```
src/
├── main.jsx        # React entry point (StrictMode, root mount)
├── App.jsx         # Entire application (~1080 lines, monolithic component)
├── App.css         # Minimal app-level styles (#root)
├── index.css       # Tailwind CSS import
└── assets/         # Static assets (react.svg)
```

### Single-Component Architecture

The entire app lives in `src/App.jsx` as one React component with render functions:

- `renderDashboard()` — hero card, stats, today's meals, upcoming events
- `renderTasks()` — task list with priority indicators
- `renderMealPlan()` — weekly meal grid
- `renderCalendar()` — interactive month-view calendar with event modal

Navigation uses tab-based switching via `activeTab` state (no router library).

### State Management

All state is managed with React `useState`/`useEffect` hooks — no Redux, Context, or external state library. Key state variables:

- `tasks` — task objects with id, content, completed, priority
- `weather` / `weatherLoading` — data from Open-Meteo API
- `language` — `'de'` or `'en'`
- `activeTab` — current view (`'dashboard'`, `'tasks'`, `'mealPlan'`, `'calendar'`)
- `mealPlan` — weekly meal data (procedurally generated by week number)
- `familyEvents` — calendar events array
- `currentMonth` / `currentYear` — calendar navigation

### Data Sources

- **Weather:** Open-Meteo API (`api.open-meteo.com`), hardcoded to Rosenheim, Germany (47.8561°N, 12.1233°E)
- **Tasks:** Mock data with simulated 500ms delay
- **Meals:** Embedded database with seeded random selection per week
- **Events:** Initial hardcoded events, new ones created via in-app form
- **No `.env` files or environment variables** — all config is inline

## Code Conventions

### Naming

- **Components:** PascalCase (`App`)
- **Functions:** camelCase (`formatTime`, `fetchWeather`, `renderDashboard`)
- **State variables:** camelCase (`currentTime`, `weatherLoading`, `sidebarOpen`)
- **CSS:** Tailwind utility classes exclusively (no custom CSS class names)

### Patterns

- Functional components only (no class components)
- Inline render functions for view sections (not separate component files)
- Translations embedded as a `translations` object keyed by language
- Ternary operators and `&&` for conditional rendering
- `.map()` with keys for list rendering
- `try/catch` with `console.error` for API error handling

### ESLint Rules

- Flat config format (ESLint 9+)
- `react-hooks` recommended rules enforced
- `react-refresh` Vite rules active
- `no-unused-vars` allows uppercase/underscore-prefixed variables (`^[A-Z_]`)
- `dist/` directory ignored

### Styling

- **Tailwind CSS 4** via `@tailwindcss/postcss` PostCSS plugin
- Mobile-first responsive design using Tailwind breakpoints (`sm:`, `md:`, `lg:`, `xl:`)
- Color-coded family members: Schelli = blue, Kathy = pink, Virginia = purple
- Priority colors: 4/urgent = red, 3/high = orange, 2/normal = blue, 1/low = gray
- Cards use white backgrounds with gray borders and subtle shadows

## Key Design Decisions

- **Monolithic structure:** All logic is in `App.jsx`. When adding features, add render functions to this file rather than creating new component files (unless refactoring is explicitly requested).
- **No routing library:** Tab switching is state-driven. Add new tabs by extending `activeTab` values and adding corresponding render functions + sidebar buttons.
- **Bilingual support:** All user-facing strings must exist in both `de` and `en` in the `translations` object. Use `t('key')` pattern to access translations.
- **No backend:** This is a purely client-side app. Data persistence is in-memory only (resets on page reload).
- **No testing:** There is no test suite. If adding tests, Vitest would be the natural choice given the Vite toolchain.

## Build & Configuration

| File | Purpose |
|------|---------|
| `vite.config.js` | Vite config — React plugin only, no custom aliases |
| `eslint.config.js` | ESLint 9 flat config with React hooks/refresh plugins |
| `tailwind.config.js` | Content paths: `index.html` + `src/**/*.{js,ts,jsx,tsx}` |
| `postcss.config.js` | Tailwind CSS v4 PostCSS plugin |
| `index.html` | HTML shell, mounts React at `#root` |

## Common Tasks

### Adding a new tab/feature

1. Add translation keys to the `translations` object (both `de` and `en`)
2. Create a `renderNewFeature()` function in `App.jsx`
3. Add a sidebar button with the new tab name
4. Add `{activeTab === 'newFeature' && renderNewFeature()}` to the main content area

### Adding a new family event type

Events follow the structure: `{ id, title, date, time, member, type }`. Members are `'schelli'`, `'kathy'`, or `'virginia'`. Add to `initialFamilyEvents()` or create through the in-app form.

### Modifying the meal plan

The meal database is embedded in `App.jsx`. Each meal has: `{ name, calories, emoji }` with translations keyed under `de`/`en`. Meals are organized by category: `breakfast`, `lunch`, `dinner`.
